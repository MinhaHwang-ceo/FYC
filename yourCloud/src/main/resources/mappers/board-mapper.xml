<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="Board">
	<resultMap type="Board" id="boardResultSet">
		<id property="bNo" column="BOARD_NO" />
		<result property="bTitle" column="BOARD_TITLE" />
		<result property="writer" column="MEMBER_NAME" />
		<result property="bCount" column="VIEW_COUNT" />
		<result property="open" column="OPEN" />
		<result property="bCategory" column="BOARD_CATEGORY" />
		<result property="refBNo" column="REF_BOARD_NO" />
		<result property="createDate" column="CREATE_DATE" />
	</resultMap>
	<resultMap type="Comment" id="commentResultSet">
		<id property="cNo" column="COMMENT_NO" />
		<result property="writer" column="MEMBER_NAME" />
		<result property="createDate" column="CREATE_DATE" />
		<result property="refCNo" column="REF_COMMENT_NO" />
		<result property="content" column="COMMENT_CONTENT" />
		<result property="bNo" column="BOARD_NO" />
	</resultMap>
	<resultMap type="Board" id="boardResultSet2">
		<id property="bNo" column="BOARD_NO" />
		<result property="bTitle" column="BOARD_TITLE" />
		<result property="writer" column="MEMBER_NAME" />
		<result property="bCount" column="VIEW_COUNT" />
		<result property="open" column="OPEN" />
		<result property="bCategory" column="BOARD_CATEGORY" />
		<result property="refBNo" column="REF_BOARD_NO" />
		<result property="createDate" column="CREATE_DATE" />
		<collection property="commentList"
			javaType="java.util.ArrayList" resultMap="commentResultSet" />
	</resultMap>
	<select id="selectListCount" resultType="_int">
		SELECT 
			COUNT(*) 
		FROM 
			BOARD 
		WHERE 
			OPEN = 'Y'
	</select>
	<select id="selectBoardList" resultMap="boardResultSet">
		SELECT
			*
		FROM
			BOARD B, MEMBER M
		WHERE
			B.WRITER = M.MEMBER_NO
		AND
			B.STATUS = 'N'
		ORDER BY 
			BOARD_NO DESC
	
	</select>
	
</mapper>
